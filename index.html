<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Evil Hangman: Battle the AI</title>
  <style>
    body {
      background: #222;
      color: #eee;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    #word { font-size: 2rem; letter-spacing: 0.5rem; margin: 1rem 0; }
    #letters button {
      margin: 0.2rem;
      width: 2rem;
      height: 2rem;
      background: #444;
      border: none;
      color: #eee;
      cursor: pointer;
      font-weight: bold;
    }
    #letters button:disabled { background: #111; color: #555; cursor: default; }
    #info { margin: 1rem; }
    #reset {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      border: none;
      background: #800;
      color: #eee;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Evil Hangman</h1>
  <div id="word">----</div>
  <div id="letters"></div>
  <div id="info">Guesses left: <span id="lives">8</span> | Wrong: <span id="wrong">0</span></div>
  <button id="reset">üîÑ New Game</button>

  <script>
    // small sample word list (all 6 letters)
    const WORDS = [
      "planet","forest","castle","dragon","market","village","window","puzzle",
      "diamond","flight","guitar","silver","museum","jungle","tunnel","velvet",
      "rocket","quartz","zombie","father","mother","number","orange","people",
      "danger","candle","energy","butter","animal","leader","future","labour",
      "travel","garden","secret","bridge","friend","hunger","island","kettle"
    ];
    let candidates, pattern, lives, wrongCount, guessed;

    const wordEl   = document.getElementById("word");
    const lettersEl= document.getElementById("letters");
    const livesEl  = document.getElementById("lives");
    const wrongEl  = document.getElementById("wrong");
    const resetBtn = document.getElementById("reset");

    function init() {
      // all words same length
      candidates = WORDS.slice();
      pattern    = Array(candidates[0].length).fill("-");
      lives      = 8;
      wrongCount = 0;
      guessed    = new Set();
      updateDisplay();
      buildKeyboard();
    }

    function buildKeyboard() {
      lettersEl.innerHTML = "";
      "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(letter => {
        const btn = document.createElement("button");
        btn.textContent = letter;
        btn.onclick = () => makeGuess(letter.toLowerCase(), btn);
        lettersEl.appendChild(btn);
      });
    }

    function updateDisplay() {
      wordEl.textContent = pattern.join("");
      livesEl.textContent = lives;
      wrongEl.textContent = wrongCount;
    }

    function makeGuess(letter, btn) {
      btn.disabled = true;
      if (guessed.has(letter)) return;
      guessed.add(letter);

      // partition into families by pattern of this guess
      const families = {};
      for (let w of candidates) {
        let key = "";
        for (let i = 0; i < w.length; i++) {
          key += (w[i] === letter ? letter : "-");
        }
        (families[key] || (families[key] = [])).push(w);
      }
      // pick the largest family
      let bestKey = Object.keys(families).reduce((a,b) =>
                 families[b].length > families[a].length ? b : a
      );
      candidates = families[bestKey];

      // reveal if any
      if (bestKey.includes(letter)) {
        for (let i = 0; i < bestKey.length; i++) {
          if (bestKey[i] === letter) pattern[i] = letter;
        }
      } else {
        lives--;
        wrongCount++;
      }
      updateDisplay();
      checkEnd();
    }

    function checkEnd() {
      if (!pattern.includes("-")) {
        setTimeout(() => alert("üéâ You cracked it! Word was ‚Äú" + candidates[0] + "‚Äù"), 10);
        disableAll();
      } else if (lives <= 0) {
        setTimeout(() => alert("üòà The AI wins! Word was ‚Äú" + candidates[Math.floor(Math.random()*candidates.length)] + "‚Äù"), 10);
        disableAll();
      }
    }

    function disableAll() {
      Array.from(lettersEl.children).forEach(b => b.disabled = true);
    }

    resetBtn.onclick = init;
    init();
  </script>
</body>
</html>
